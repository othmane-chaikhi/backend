# 🚀 Django Backend Deployment to Render

## 📋 Prerequisites
- GitHub repository with your Django backend code
- Render account (free tier available)

## 🔧 Step 1: Prepare Your Repository

### 1.1 Push your backend code to GitHub
```bash
git add .
git commit -m "Prepare backend for Render deployment"
git push origin main
```

### 1.2 Verify these files exist in your backend folder:
- ✅ `requirements.txt` (with gunicorn and whitenoise)
- ✅ `Procfile`
- ✅ `render.yaml` (optional, for easy setup)
- ✅ `config/settings.py` (with production settings)

## 🌐 Step 2: Deploy to Render

### 2.1 Create a New Web Service
1. Go to [Render Dashboard](https://dashboard.render.com)
2. Click **"New +"** → **"Web Service"**
3. Connect your GitHub repository
4. Select your backend folder as the **Root Directory**

### 2.2 Configure Build Settings
- **Build Command**: `pip install -r requirements.txt && python manage.py migrate && python manage.py collectstatic --noinput`
- **Start Command**: `gunicorn config.wsgi:application`

### 2.3 Set Environment Variables
Add these environment variables in Render:

#### Required Variables:
```
SECRET_KEY=your-super-secret-key-here
DEBUG=False
ALLOWED_HOSTS=your-app-name.onrender.com
DATABASE_ENGINE=django.db.backends.postgresql
```

#### Database Variables (Auto-generated by Render):
```
DATABASE_NAME=portfolio_db
DATABASE_USER=portfolio_user
DATABASE_PASSWORD=auto-generated-password
DATABASE_HOST=auto-generated-host
DATABASE_PORT=5432
```

#### CORS Settings:
```
CORS_ALLOWED_ORIGINS=https://jade-quokka-a7aef2.netlify.app
```

#### Optional (for AI features):
```
GEMINI_API_KEY=your-gemini-api-key
```

## 🗄️ Step 3: Create PostgreSQL Database

### 3.1 Create Database
1. In Render Dashboard, click **"New +"** → **"PostgreSQL"**
2. Name it: `portfolio-db`
3. Choose **Free** plan
4. Click **"Create Database"**

### 3.2 Connect Database to Web Service
1. Go to your web service settings
2. In **"Environment"** section, add:
   - `DATABASE_URL` (copy from database settings)
   - Or use individual database variables

## 🔄 Step 4: Update Frontend API URL

### 4.1 Get Your Backend URL
After deployment, your backend will be available at:
`https://your-app-name.onrender.com`

### 4.2 Update Netlify Environment Variables
1. Go to your Netlify site dashboard
2. Go to **Site settings** → **Environment variables**
3. Update `NEXT_PUBLIC_API_URL` to:
   ```
   https://your-app-name.onrender.com/api
   ```

## ✅ Step 5: Test Your Deployment

### 5.1 Check Backend Health
Visit: `https://your-app-name.onrender.com/api/`
Should return API documentation

### 5.2 Test Frontend Connection
1. Visit your Netlify site
2. Check browser console for API calls
3. Verify images load from your backend

## 🐛 Troubleshooting

### Common Issues:

#### 1. Build Fails
- Check `requirements.txt` has all dependencies
- Verify Python version (Render uses Python 3.11)

#### 2. Database Connection Error
- Ensure database is created and connected
- Check environment variables are set correctly

#### 3. Static Files Not Loading
- Verify `whitenoise` is in requirements.txt
- Check `STATIC_ROOT` and `STATIC_URL` settings

#### 4. CORS Errors
- Update `CORS_ALLOWED_ORIGINS` with your Netlify URL
- Ensure frontend URL is correct

## 📊 Expected Results

After successful deployment:
- ✅ Backend API accessible at `https://your-app-name.onrender.com/api/`
- ✅ Database connected and migrations applied
- ✅ Static files served correctly
- ✅ Frontend can fetch data from backend
- ✅ Images load from backend media files

## 🎯 Next Steps

1. **Test all API endpoints**
2. **Create admin user**: `python manage.py createsuperuser`
3. **Add sample data** through Django admin
4. **Update frontend** to use real backend data
5. **Monitor logs** in Render dashboard

---

## 🆘 Need Help?

If you encounter issues:
1. Check Render build logs
2. Verify environment variables
3. Test API endpoints manually
4. Check Django logs in Render dashboard

**Your Django backend will be live and ready to serve your frontend!** 🚀
